!function(){"use strict";function e(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}let t=()=>{window.removeEventListener("gp-global-loaded",t),customElements.get("gp-sticky")||customElements.define("gp-sticky",class extends GP.Component{addEventScroll(e,t){window.addEventListener("scroll",((e,t)=>{let s;return(...t)=>{clearTimeout(s),s=window.setTimeout(()=>e.apply(this,t),50)}})(()=>{this.handler(e,t)},0))}handler(e,t){var s,i,l,n,r,o;this.handleDisplay(e.desktop,t.desktop,""),this.handleDisplay(null!==(s=e.tablet)&&void 0!==s?s:e.desktop,null!==(i=t.tablet)&&void 0!==i?i:t.desktop,"-tablet"),this.handleDisplay(null!==(n=null!==(l=e.mobile)&&void 0!==l?l:e.tablet)&&void 0!==n?n:e.desktop,null!==(o=null!==(r=t.mobile)&&void 0!==r?r:t.tablet)&&void 0!==o?o:t.desktop,"-mobile")}updateStyle(e,t){if(!this.$stickyElement)return;let s=this.currentDisplayState[e]||"none";s!==t&&(this.currentDisplayState[e]=t,this.$stickyElement.style.setProperty(`--d${e}`,t))}disconnectedCallback(){for(let t in this.observers){var e;null===(e=this.observers[t])||void 0===e||e.disconnect()}}constructor(){let t;super(),e(this,"$stickyElement",null),e(this,"observers",{}),e(this,"currentDisplayState",{}),e(this,"lastUpdateTime",{}),e(this,"COOLDOWN_MS",200),e(this,"createObserver",(e,t)=>(this.observers[t]||(this.observers[t]=new IntersectionObserver(s=>{s.forEach(s=>{let i=performance.now(),l=this.lastUpdateTime[t]||0;i-l<this.COOLDOWN_MS||requestAnimationFrame(()=>{let l=this.currentDisplayState[t]||"none";s.isIntersecting?l="none":s.boundingClientRect.top<0&&e&&(l="block"),this.updateStyle(t,l),this.lastUpdateTime[t]=i})})},{threshold:.1,rootMargin:"-20px 0px 0px 0px"})),this.observers[t])),e(this,"handleDisplay",(e,t,s="")=>{let i=document.querySelectorAll("gp-product-button"),l=Array.from(i).filter(e=>!e.closest("gp-sticky")),n=!1;if("after-first-cart-button"===e){if(l&&l.length>0){for(let e of l)if(!n&&e){n=!0;let i=this.createObserver(null!=t&&t,s);i&&(i.observe(e),this.addEventListener("disconnectedCallback",()=>{i.disconnect()}));break}}!n&&l.length>0&&this.updateStyle(s,t?"block":"none")}});let s=this.getAttribute("gp-data");if(s)try{t=JSON.parse(s)}catch(e){throw Error("gp-data is not Object: "+e.message)}let i=t.uid;if(i&&(this.$stickyElement=document.getElementById(i),this.$stickyElement)){let e=t.setting.display,s=t.advanced.d;this.handler(e,s),this.addEventScroll(e,s)}}})};"completed"===window.gpReadyState?t():window.addEventListener("gp-global-loaded",t)}();
